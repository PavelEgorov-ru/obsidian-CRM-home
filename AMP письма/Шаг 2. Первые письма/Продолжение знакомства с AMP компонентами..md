Перед прочтением ознакомится с предыдущими материалами:
- [[Первое использование AMP компонента]]

На этом шаге данный материал, наверное, будет самым обширным. Будет много примеров писем и ссылок на них.

До текущего момента нам для использования AMP компонента не требовалось ничего, кроме использования тега сразу в верстке. `amp-img` - единственный компонент, который можно так использовать. Для остальных нужно подключать специальные скрипты в тег `head`. Письмо, в котором есть скрипты неиспользуемых компонентов, не пройдет валидацию.
## amp-anim

документация - https://amp.dev/documentation/examples/email/components/amp-anim.email/
компонент - https://amp.dev/documentation/components/email/amp-anim

Подключение - 
`<script async custom-element="amp-anim"  src="https://cdn.ampproject.org/v0/amp-anim-0.1.js"></script>` 

В обычном веб- и email-весртке для изображения используется один тег - `img`. Он может работать как со статическим изображением (.png, .img и т.д.), так и с gif. В AMP-верстке это не так. Для работы гиф в письме требуется отдельный компонент - `amp-anim`.

Главная причина появления этого AMP компонента - оптимизация. Вообще, все AMP компоненты нужны либо для оптимизации, либо для безопасности.

В обычном браузере, гифка загружается через тег `img` и начинает непрерывно проигрываться. Браузер тратить ресурсы устройства, устройство быстрее тратит свою энергию. 

`amp-anim` проигрывает гифку только тогда, когда она находится во вьюпорте. Т.е. анимация проигрывается только тогда, когда пользователь видит ее на экране устройства.

Можно использовать в двух вариантах

```
Первый вариант. Если гифка не загрузится, какое-то время будет показываться лоадер загрузки, потом - текст из атрибута alt

<div>
	<amp-anim width="900" height="197" src="https://trafaret-decor.art/sites/default/files/animatepeoples/kids/funny%20(6).gf" alt="гифка"         layout="responsive">
	</amp-anim>
</div>
```

Гиф-анимация часто бывает тяжелой и не может сразу загрузиться на устройство. Пока она полностью не загрузится, можно показывать статическое изображение.

```
Второй вариант. Внутрь помещают amp-img и добавляют к нему атрибут placeholder.

Чтобы не было скачков контента при переключении отображения с amp-img на amp-anim, нужно указывать им одинаковые атрибуты ширины, высоты и layout

<div>
	<amp-anim width="900" height="197" src="https://trafaret-decor.art/sites/default/files/animatepeoples/kids/funny%20(6).gf" alt="гифка"         layout="responsive">
		<amp-img placeholder width="900" height="197" src="https://rassylka.static1-sima-land.com/ftp_rassylka/000032743-1/0000.png" layout="responsive">
		</amp-img>
	</amp-anim>
</div>
```

Не рекомендуется использовать много анимации, особенно тяжелой. Нужно не забывать оптимизировать и сжимать каждую гифку.

В целом, про этот компонент мне больше нечего сказать.